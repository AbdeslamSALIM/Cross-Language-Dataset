Session Initiation Protocol (SIP o Protocolo de Inicio de Sesiones) es un protocolo desarrollado por el IETF MMUSIC Working Group con la intención de ser el estándar para la iniciación, modificación y finalización de sesiones interactivas de usuario donde intervienen elementos multimedia como el video, voz, mensajería instantánea, juegos online y realidad virtual.La sintaxis de sus operaciones se asemeja a las de HTTP y SMTP, los protocolos utilizados en los servicios de páginas Web y de distribución de e-mails respectivamente. Esta similitud es natural ya que SIP fue diseñado para que la telefonía se vuelva un servicio más en la Internet.Protocolo SIP: qué es y para qué sirveEn noviembre del año 2000, SIP fue aceptado como el protocolo de señalización de 3GPP y elemento permanente de la arquitectura IMS (IP Multimedia Subsystem). SIP es uno de los protocolos de señalización para voz sobre IP, otro es H.323.Historia del protocolo SIP&lt;ref&gt;Gonzalo Camarillo. &quot;SIP Demystified&quot;. Mc Graw Hill. 2002. ISBN 0-07-137340-3&lt;/ref&gt;El 22 de febrero de 1996 Mark Handley y Eve Schooler presentaron al IETF un borrador del Session Invitation Protocol conocido ahora como SIPv1. El mismo estaba basado en trabajos anteriores de Thierry Turletti (INRIA Videoconferencing System o IVS) y de Eve Schooler (Multimedia Conference Control o MMCC). Su principal fortaleza, heredada por la versión actual de SIP, era el concepto de registración, por el cual un usuario informaba a la red dónde (en qué host de Internet) podía recibir invitaciones a conferencias. Esta característica permitía la nomadicidad del usuario.Ese mismo día el Dr. Henning Schulzrinne presentó un borrador del Simple Conference Invitation Protocol (SCIP), que estaba basado en el HTTP (Hypertext Transport Protocol). Usaba TCP (Transmission Control Protocol) como protocolo de transporte. Como identificadores de los usuarios utilizaba direcciones de correo electrónico para permitir el uso de una misma dirección para recibir correos electrónicos e invitaciones a conferencias multimedia. No utilizaba al SDP para la descripción de los contenidos sino que creaba un mecanismo propio.El IETF decidió combinar ambos en un único protocolo denominado Session Initiation Protocol, (es decir cambiando el significado de la inicial I en el acrónimo "SIP") y su número de versión fue el dos, dando origen al SIPv2. En diciembre de 1996 los tres autores (Schulzrinne, Handley y Schooler), presentaron el borrador del SIPv2. El mismo luego de ser discutido en el grupo de trabajo MMUSIC (Multiparty Multimedia Session Control) del IETF alcanzó el grado de "proposed standard" en la 2543 publicada en febrero de 1999. En septiembre de 1999 se creó el grupo de trabajo SIP en el IETF que continuó con el desarrollo del protocolo y en junio de 2002 se publicó la 3261 que reemplazó a la anterior introduciendo modificaciones propuestas durante el trabajo del grupo SIP. Los autores de esta última RFC, hoy vigente son: Jonnathan Rosenberg, Henning Schulzrinne, Gonzalo Camarillo, Allan Johnston, Jon Peterson, Robert Sparks, Mark Handley y Eve Schooler.Diseño del protocoloEl protocolo SIP fue diseñado por el IETF con el concepto de "caja de herramientas",Gonzalo Camarillo. ibídem es decir, el protocolo SIP se vale de las funciones aportadas por otros protocolos, las que da por hechas y no vuelve a desarrollarlas . Debido a este concepto SIP funciona en colaboración con otros muchos protocolos. El protocolo SIP se concentra en el establecimiento, modificación y terminación de las sesiones, se complementa, entre otros, con el SDP, que describe el contenido multimedia de la sesión, por ejemplo qué direcciones IP,puertos y códecs se usarán durante la comunicación. También se complementa con el RTP (Real-time Transport Protocol). RTP es el verdadero portador para el contenido de voz y video que intercambian los participantes en una sesión establecida por SIP.Otro concepto importante en su diseño es el de extensibilidad. Esto significa que las funciones básicas del protocolo, definidas en la RFC 3261, pueden ser extendidas mediante otras RFC (Requests for Comments) dotando al protocolo de funciones más potentes.Las funciones básicas del protocolo incluyen:Determinar la ubicación de los usuarios, proveyendo nomadicidad.Establecer, modificar y terminar sesiones multipartitas entre usuarios.El protocolo SIP adopta el modelo cliente-servidor y es transaccional. El cliente realiza peticiones (requests) que el servidor atiende y genera una o más respuestas (dependiendo de la naturaleza, Método, de la petición). Por ejemplo para iniciar una sesión el cliente realiza una petición con el método INVITE en donde indica con qué usuario (o recurso) quiere establecer la sesión. El servidor responde ya sea rechazando o aceptado esa petición en una serie de respuestas. Las respuestas llevan un código de estado que brindan información acerca de si las peticiones fueron resueltas con éxito o si se produjo un error. La petición inicial y todas sus respuestas constituyen una transacción.Los servidores, por defecto, utilizan el puerto 5060 en TCP (Transmission Control Protocol) y UDP (User Datagram Protocol) para recibir las peticiones de los clientes SIP.Como una de las principales aplicaciones del protocolo SIP es la telefonía, un objetivo de SIP fue aportar un conjunto de las funciones de procesamiento de llamadas y capacidades presentes en la red pública conmutada de telefonía. Así, implementó funciones típicas de dicha red, como son: llamar a un número, provocar que un teléfono suene al ser llamado, escuchar la señal de tono o de ocupado. La implementación y terminología en SIP son diferentes.SIP también implementa muchas de las más avanzadas características del procesamiento de llamadas de SS7, aunque los dos protocolos son muy diferentes. SS7 es altamente centralizado, caracterizado por una compleja arquitectura central de red y unos terminales tontos (los tradicionales teléfonos de auricular). SIP es un protocolo peer to peer (también llamado p2p). Como tal requiere un núcleo de red sencillo (y altamente escalable) con inteligencia distribuida en los extremos de la red, incluida en los terminales (ya sea mediante hardware o software). Muchas características de SIP son implementadas en los terminales en oposición a las tradicionales características de SS7, que son implementadas en la red.Aunque existen muchos otros protocolos de señalización para VoIP, SIP se caracteriza porque sus promotores tienen sus raíces en la comunidad IP y no en la industria de las telecomunicaciones. SIP ha sido estandarizado y dirigido principalmente por el IETF mientras que el protocolo de VoIP H.323 ha sido tradicionalmente más asociado con la Unión Internacional de Telecomunicaciones. Sin embargo, las dos organizaciones han promocionado ambos protocolos del mismo modo.SIP es similar a HTTP y comparte con él algunos de sus principios de diseño: es legible por humanos y sigue una estructura de petición-respuesta. Los promotores de SIP afirman que es más simple que H.323. Sin embargo, aunque originalmente SIP tenía como objetivo la simplicidad, en su estado actual se ha vuelto tan complejo como H.323. SIP comparte muchos códigos de estado de HTTP, como el familiar '404 no encontrado' (404 not found). SIP y H.323 no se limitan a comunicaciones de voz y pueden mediar en cualquier tipo de sesión comunicativa desde voz hasta vídeo o futuras aplicaciones todavía sin realizar.Funcionamiento del protocoloEl protocolo SIP permite el establecimiento de sesiones multimedia entre dos o más usuarios. Para hacerlo se vale del intercambio de mensajes entre las partes que quieren comunicarse.Agentes de UsuarioLos usuarios, que pueden ser seres humanos o aplicaciones de software,por ejemplo una aplicación de atención automática de llamadas utilizan para establecer sesiones lo que el protocolo SIP denomina "Agentes de usuario". Estos no son más que los puntos extremos del protocolo, es decir son los que emiten y consumen los mensajes del protocolo SIP. Un videoteléfono, un teléfono, un cliente de software (softphone) y cualquier otro dispositivo similar es para el protocolo SIP un agente de usuario. El protocolo SIP no se ocupa de la interfaz de estos dispositivos con el usuario final, sólo se interesa en los mensajes que estos generan y cómo se comportan al recibir determinados mensajes.Los agentes de usuario se comportan como clientes (UAC: User Agent Clients) y como servidores (UAS: User Agent Servers). Son UAC cuando realizan una petición y son UAS cuando la reciben. Por esto los agentes de usuario deben implementar un UAC y un UAS.Además de los agentes de usuario existen otras entidades que intervienen en el protocolo, estos son los Servidores de Registro o Registrar, los Proxy y los Redirectores. A continuación se describe su finalidad.Servidores de Registro o ''Registrar''El protocolo SIP permite establecer la ubicación física de un usuario determinado, esto es en qué punto de la red está conectado. Para ello se vale del mecanismo de registro. Este mecanismo funciona como sigue:Cada usuario tiene una dirección lógica que es invariable respecto de la ubicación física del usuario. Una dirección lógica del protocolo SIP es de la forma usuario@dominio es decir tiene la misma forma que una dirección de correo electrónico. La dirección física (denominada "dirección de contacto") es dependiente del lugar en donde el usuario está conectado (de su dirección IP). Cuando un usuario inicializa su terminal (por ejemplo conectando su teléfono o abriendo su software de telefonía SIP) el agente de usuario SIP que reside en dicho terminal envía una petición con el método REGISTER a un Servidor de Registro (Registrar en inglés), informando a qué dirección física debe asociarse la dirección lógica del usuario. El servidor de registro realiza entonces dicha asociación (denominada binding). Esta asociación tiene un período de vigencia y si no es renovada, caduca. También puede terminarse mediante un desregistro. La forma en que dicha asociación es almacenada en la red no es determinada por el protocolo SIP, pero es vital que los elementos de la red SIP accedan a dicha información.Servidores Proxy y de RedirecciónPara encaminar un mensaje entre un agente de usuario cliente y un agente de usuario servidor normalmente se recurre a los servidores. aunque existe un desarrollo del porotocolo SIP sin servidores usando estrategias de protocolos peer to peer (P2P) como los que se usan para compartir archivos (file sharing) Estos servidores pueden actuar de dos maneras:Como Proxy, encaminando el mensaje hacia destino,Como Redirector (Redirect) generando una respuesta que indica al originante la dirección del destino o de otro servidor que lo acerque al destino.La principal diferencia es que el servidor proxy queda formando parte del camino entre el UAC y el (o los) UAS, mientras que el servidor de redirección una vez que indica al UAC cómo encaminar el mensaje ya no interviene más.Un mismo servidor puede actuar como Redirector o como Proxy dependiendo de la situación.Casos típicos de servidoresUn conjunto de usuarios que pertenecen a una compañía o proveedor de servicios de comunicaciones, conforman un dominio. Este dominio, que se indica en una dirección SIP después del caracter del servidor entrante (Inbound Server).Es habitual también, que exista un servidor que reciba las peticiones originadas por los usuarios de un dominio hacia otros dominios. Este recibe el nombre de Servidor Saliente (Outbound Server).Un agente de usuario normalmente encamina todos sus pedidos hacia un servidor de su propio dominio. Es este quien determina (por sus propios medios o valiéndose de otros servidores) las ubicaciones de los usuarios que son llamados por el agente de usuario en cuestión.Formato de los mensajesLas peticiones tienen distintas funciones. El propósito de una petición está determinado por lo que se denomina el Método (Method) de dicha petición, que no es más que un identificador del propósito de la petición. En la 3261 se definen los métodos básicos del protocolo. Existen otros métodos definidos en extensiones al protocolo SIP.En la línea de respuesta se indica el código de estado de la respuesta que es un número indica el resultado del procesamiento de la petición.Los encabezados de peticiones y respuestas se utilizan para diversas funciones del protocolo relacionadas con el encaminamiento de los mensajes, autenticación de los usuarios, entre otras. La extensibilidad del protocolo permite crear nuevos encabezados para los mensajes agregando de esta manera funcionalidad.El cuerpo de los mensajes es opcional y se utiliza entre otras cosas para transportar las descripciones de las sesiones que se quieren establecer, utilizando la sintaxis del protocolo SDP.Flujo de establecimiento de una sesiónEl flujo habitual del establecimiento de una sesión mediante el protocolo SIP es el siguiente, en este ejemplo todos los servidores actúan como proxy:Un usuario ingresa la dirección lógica de la persona con la que quiere comunicarse, puede indicar al terminal también las características de las sesión que quiere establecer (voz, voz y video, etc.), o estas pueden estar implícitas por el tipo de terminal del que se trate. El agente de usuario SIP que reside en el terminal, actuando como UAC envía la petición (en este caso con el método INVITE) al servidor que tiene configurado. Este servidor se vale del sistema DNS para determinar la dirección del servidor SIP del dominio del destinatario. El dominio lo conoce pues es parte de la dirección lógica del destinatario. Una vez obtenida la dirección del servidor del dominio destino, encamina hacia allí la petición. El servidor del dominio destino establece que la petición es para un usuario de su dominio y entonces se vale de la información de registración de dicho usuario para establecer su ubicación física. Si la encuentra, entonces encamina la petición hacia dicha dirección. El agente de usuario destino si se encuentra desocupado comenzará a alertar al usuario destino y envía una respuesta hacia el usuario originante con un código de estado que indica esta situación (180 en este caso). La respuesta sigue el camino inverso hacia el originante. Cuando el usuario destino finalmente acepta la invitación, se genera una respuesta con un código de estado (el 200) que indica que la petición fue aceptada. La recepción de la respuesta final es confirmada por el UAC originante mediante una petición con el método ACK (de Acknowledgement), esta petición no genera respuestas y completa la transacción de establecimiento de la sesión.Normalmente la petición con el método INVITE lleva un cuerpo donde viaja una descripción de la sesión que quiere establecer, esta descripción es realizada con el protocolo SDP. Existen situaciones en las que la descripción de sesión no se incluye en la petición INVITE sino que es generada por el usuario llamado en la respuesta al INVITE y respondida por el orginante en la petición ACK. Esto es utilizado en la implementación de servicios avanzados con el protocolo SIP.  En ella se indica el tipo de contenido a intercambiar (voz, video, etc.) y sus caractarísticas (códecs, direcciones, puertos donde se espera recibirlos, velocidades de transmisión, etc.). Esto se conoce como "oferta de sesión SDP". La respuesta a esta oferta viaja, en este caso, en el cuerpo de la respuesta defnitiva a la petición con el método INVITE. La misma contiene la descripción de la sesión desde el punto de vista del destinatario. Si las descripciones fueran incompatibles, es decir no coinciden los tipos de medios, o falta un tipo de medio considerado vital, entre otros casos la sesión debe terminarse (mediante una petición con el método BYE).Al terminar la sesión, lo que puede hacer cualquiera de las partes, el agente de usuario de la parte que terminó la sesión, actuando como UAC, envía hacia la otra una petición con el método BYE. Cuando lo recibe el UAS genera la respuesta con el código de estado correspondiente.Si bien se describió el caso de una sesión bipartita, el protocolo permite el establecimiento de sesiones multipartitas. También permite que un usuario esté registrado en diferentes ubicaciones pudiendo realizar la búsqueda en paralelo o secuencial entre todas ellas.Elementos de una Red SIP prácticaLos terminales físicos, dispositivos con el aspecto y forma de teléfonos tradicionales, pero que usan SIP y RTP para la comunicación, están disponibles comercialmente gracias a muchos fabricantes. Algunos de ellos usan numeración electrónica (ENUM) o DUNDi para traducir los números existentes de teléfono a direcciones SIP usando DNS (Domain Name Server), así llaman a otros usuarios SIP saltándose la red telefónica, con lo que un proveedor de servicio normalmente actúa de pasarela hacia la red pública conmutada de telefonía para los números de teléfono tradicionales (cobrando por ello).Hoy en día, ya son habituales los terminales con soporte SIP por software. Microsoft Windows Messenger usa SIP y en junio de 2003 Apple Computer anunció y publicó en fase beta su iChat, una nueva versión compatible con el AOL Instant Messenger que soporta charlas de audio y vídeo a través de SIP.SIP también requiere proxy y elementos de registro para dar un servicio práctico. Aunque dos terminales SIP puedan comunicarse sin intervención de infraestructuras SIP (razón por la que el protocolo se define como punto-a-punto), este enfoque es impracticable para un servicio público. Hay varias implementaciones de softswitch (de Nortell, Sonus, Alcatel-Lucent y muchas más) que pueden actuar como proxy y elementos de registro. Otras empresas, como Ubiquity Software y Dynamicsoft tienen productos cuya implementación está basada en estándares, construidos sobre la especificación Java JAIN.De los RFCs:"SIP hace uso de elementos llamados servidores proxy para ayudar a enrutar las peticiones hacia la localización actual del usuario, autenticar y autorizar usuarios para darles servicio, posibilitar la implementación de políticas de enrutamiento de llamadas, y aportar capacidades añadidas al usuario.""SIP también aporta funciones de registro que permiten al usuario informar de su localización actual a los servidores proxy.""Es un concepto importante que la distinción entre los tipos de servidores SIP es lógica y no física."Mensajería instantánea y presenciaUn protocolo de mensajería instantánea basado en SIP, llamado SIMPLE, fue propuesto como estándar y está en desarrollo. SIMPLE puede también encargarse de la información de presencia, transmitiendo la voluntad de una persona de entablar comunicación con otras. La información de presencia es más reconocible hoy en día como el estado en los clientes de mensajería instantánea como MSN Messenger, AIM, Skype, Google Talk (y otros clientes XMPP).OpenWengo, software libre de telefonía, y Gizmo Project, en software propietario, han implementado SIP en sus clientes y servicios. Ambos programas usan SIP para aceptar las llamadas de un cliente a otro.Otros programas de audio/videoconferencia que usan SIP:EkigaTwinkleTapiocaSipXKPhoneKCallWxCommunicatorLinphoneReferenciasEnlaces externosRFC 3261Wiki sobre SIPResumen del protocolo SIPPágina de Henning Schulzrinne co-autor del estándar SIP en Internet (en inglés)Foro por la adopción de SIP (en inglés)Web con información sobre SIP de Packetizer (en inglés)Tutorial de SIP (en inglés)foro técnico (inglés, italiano, español)-Categoría:Protocolos de Internet Categoría:Protocolos de nivel de aplicaciónbg:SIP bs:Session Initiation Protocol ca:Session Initiation Protocol cs:Session Initiation Protocol de:Session Initiation Protocol el:SIP en:Session Initiation Protocol eo:Session Initiation Protocol eu:Session Initiation Protocol fi:SIP fr:Session Initiation Protocol gl:SIP he:Session Initiation Protocol hu:Session Initiation Protocol it:Session Initiation Protocol ja:Session Initiation Protocol ko:SIP mk:Session Initiation Protocol nl:Session Initiation Protocol pl:Session Initiation Protocol pt:SIP ro:Session Initiation Protocol ru:SIP sk:Session Initiation Protocol sv:Session Initiation Protocol th:Session Initiation Protocol tr:SIP uk:SIP zh:会话发起协议